- alias: "Familie thuis"
  trigger:
    - platform: state
      entity_id: group.family
  action:
    - service: notify.admin
      data_template:
        message: >-
          {% set state = trigger.to_state.state %}
          {% if state == 'home' -%}
            Ik heb gemerkt dat er weer iemand thuis is.
          {%- elif state == 'not_home' -%}
            Ik zie dat er niemand meer thuis is.
          {%- else -%}
            Ik weet even niet of er iemand thuis is.            
          {%- endif %}

- alias: "Notify New Device Detected"
  trigger:
    - platform: event
      event_type: device_tracker_new_device
  action:
    - service: persistent_notification.create
      data:
        message: "Nieuw apparaat herkend. Controleer bestand 'known_devices.yaml' voor details."
        title: "Nieuw apparaat"
    # - service: notify.admin
    #   data_template:
    #     message: "Nieuw apparaat herkend. Controleer bestand 'known_devices.yaml' voor details."
    #     title: "Nieuw apparaat"
