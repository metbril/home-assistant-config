- platform: dsmr
  port: /dev/serial/by-id/usb-FTDI_FT232R_USB_UART_A5Z5VJCX-if00-port0
  dsmr_version: 4
- platform: darksky
  api_key: !secret darksky_api_key
  units: si
  monitored_conditions:
    - temperature
    - apparent_temperature
    - dew_point
    - humidity
    - pressure
    - visibility
    - cloud_cover
    - wind_speed
    - wind_bearing
    - ozone
    - precip_type
    - precip_intensity
    - precip_probability
    - summary
    - icon
- platform: waqi
  token: !secret waqi_token
  locations:
    - rotterdam
  stations:
    - Rotterdam
- platform: rfxtrx
  automatic_add: True
  devices:
    0a5207023f0e0074380159:
      name: PWS TH
      data_type:
        - Humidity
        - Temperature
    0b55030c800c0000000a9569:
      name: PWS Rain
      data_type:
        - Rain rate
    105604029716013b000b000c0027002059:
      name: PWS Wind
      data_type:
        - Wind direction
- platform: rest
  # https://www.mindergas.nl/member/api
  name: rest_mindergas
  resource: https://www.mindergas.nl/api/gas_meter_readings
  method: POST
  payload: '{ "date": "{{ (as_timestamp(now()) - (24*3600)) | timestamp_custom(''%Y-%m-%d'', True) }}", "reading": {{ states.sensor.gas_consumption.state }} }'
  headers:
    Content-Type: application/json
    AUTH-TOKEN: !secret mindergas_token
- platform: template
  sensors:
    waqi_rotterdam_impact:
      friendly_name: "Luchtkwaliteit"
      value_template: >-
        {% if states.sensor.waqi_rotterdam.state | int <= 50  %}
            Goed
        {% elif states.sensor.waqi_rotterdam.state | int <= 100 %}
            Matig
        {% elif states.sensor.waqi_rotterdam.state | int <= 150 %}
            Ongezond voor risicogroepen
        {% elif states.sensor.waqi_rotterdam.state | int <= 200 %}
            Ongezond
        {% elif states.sensor.waqi_rotterdam.state | int <= 300 %}
            Zeer ongezond
        {% else %}
            Gevaarlijk
        {% endif %}
- platform: haveibeenpwned
  email: 
    - !secret haveibeenpwned_email_1
    - !secret haveibeenpwned_email_2
    - !secret haveibeenpwned_email_3
    - !secret haveibeenpwned_email_4
