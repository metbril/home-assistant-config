---
script:


automation:

  ##############################################################################
  - alias: Deurbel blaffen
    id: 4a7e909a-5d0f-4842-958d-1b67314e771d
    description: >
      When no-one is at home, bark the dog.
    mode: single

    trigger:
      - platform: state
        entity_id: switch.bel_voordeur

    # Conditions are the opposite of speak automation
    condition:
      condition: or
      conditions:
        - condition: state
          entity_id: group.family
          state: "not_home"
        - condition: state
          entity_id: sensor.occupancy
          state: "away"
        - condition: state
          entity_id: sensor.occupancy
          state: "vacation"

    action:
      - service: script.bark_the_dog

  ##############################################################################
  - alias: Deurbel spreken
    id: 053c89e0-8d24-41f0-987a-22f70b7803ec
    description: >
      When someone is at home, speak out loud that the doorbell is pressed.
    mode: single

    trigger:
      - platform: state
        entity_id: switch.bel_voordeur

    # Conditions are opposite of bark automation
    condition:
      condition: not
      conditions:
        - condition: state
          entity_id: group.family
          state: "not_home"
        - condition: state
          entity_id: sensor.occupancy
          state: "away"
        - condition: state
          entity_id: sensor.occupancy
          state: "vacation"

    action:
      - service: script.sonos_say
        data:
          media_player: media_player.woonkamer
          volume_level: 0.3
          delay: 3
          message: Er wordt aangebeld aan de voordeur.
