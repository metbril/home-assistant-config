- id: hacs_1578603337940
  alias: 'HACS: Updates Melden'
  description: Notificatie bij updates in HACS
  trigger:
  - entity_id: sensor.hacs
    platform: state
  condition:
  - condition: template
    value_template: '{{ states(trigger.entity_id) != "unknown"}}'
  - condition: template
    value_template: '{{ (states(trigger.entity_id) | float) != 0}}'
  action:
  - data_template:
      message: "{% for repo in state_attr(trigger.entity_id, 'repositories') %}\n\
        \  **{{ repo.display_name }}** _{{ repo[\"installed version\"] }}_ -> _{{\
        \ repo[\"available version\"] }}_\n{% endfor %}"
      title: Te verwerken updates in HACS
    service: persistent_notification.create
  mode: single
- id: hacs_1578603656941
  alias: 'HACS: Melden Repository toegevoegd'
  description: ''
  trigger:
  - event_data:
      action: registration
    event_type: hacs/repository
    platform: event
  condition:
  - condition: template
    value_template: '{{ trigger.event.data.repository is defined }}'
  action:
  - data_template:
      message: '{% set repo = trigger.event.data.repository %} {% set id = trigger.event.data.repository_id
        %} [{{ repo }}](/hacs/repository/{{ id }}) werd zojuist toegevoegd aan HACS.'
      title: Nieuwe repository in HACS
    service: persistent_notification.create
  mode: single
- id: lighting_1578815661
  alias: Turn On Living Lights at Dusk
  description: Inschakelen schemerverlichting woonkamer voor zonsondergang
  trigger:
  - event: sunset
    offset: -00:30:00
    platform: sun
  action:
  - scene: scene.schemerverlichting
  - data_template:
      message: '{{ [ "Vlak voor zonsondergang doe ik altijd de binnenverlichting aan.",
        "Ik doe de lampen aan, omdat het straks binnen donker gaat worden.", "Steeds
        zodra de zon verdwijnt, doe ik de @TweetHue verlichting aan.", "De hoogste
        tijd om de verlichting in te schakelen." ] | random + " #HomeAssistant" +
        [ " #Beveiliging", " #Zonsondergang", " #Verlichting", " #Hue", " #SmartLighting",
        " #SmartHome", " #HomeAutomation" ] | random }}'
    service: notify.twitter
  mode: single
- id: presence_1578816540
  alias: Melden Familie Thuis
  trigger:
  - entity_id: group.family
    platform: state
  action:
  - data_template:
      message: "{% set state = trigger.to_state.state %} {% if state == 'home' -%}\n\
        \  Ik heb gemerkt dat er weer iemand thuis is.\n{%- elif state == 'not_home'\
        \ -%}\n  Ik zie dat er niemand meer thuis is.\n{%- else -%}\n  Ik weet even\
        \ niet of er iemand thuis is.            \n{%- endif %}"
    service: notify.admin
- id: presence_1578816550
  alias: Melden Nieuw Apparaat Gedetecteerd
  trigger:
  - platform: event
    event_type: device_tracker_new_device
  action:
  - service: persistent_notification.create
    data:
      message: Nieuw apparaat herkend. Controleer bestand 'known_devices.yaml' voor
        details.
      title: Nieuw apparaat
- id: notify_1578816860
  alias: Persistente meldingen doorsturen naar beheerder
  description: Doorsturen persistente meldingen naar beheerder via Pushover
  trigger:
  - event_data:
      domain: persistent_notification
      service: create
    event_type: call_service
    platform: event
  action:
  - data_template:
      message: "{% set message = trigger.event.data.service_data.message %} {% if\
        \ 'login attempt' in message|lower %}\n  {{ message }}: http://www.ip-tracker.org/locator/ip-lookup.php?ip={{\
        \ message.split('from ')[1] }}\n{% else %}\n  {{ message }}\n{% endif %}"
    service: notify.admin
  mode: single
- id: backup_full
  alias: Daily Full Backup
  description: Full snapshot every day at 2:00
  trigger:
    platform: time
    at: 02:00:00
  action:
  - service: hassio.snapshot_full
    data_template:
      name: Automatische dagelijkse volledige backup {{ now().strftime('%Y-%m-%d')
        }}
- id: backup_sync
  alias: Daily Dropbox Sync
  description: Sync all snapshots to Dropbox every day at 3:00
  trigger:
  - platform: time
    at: 03:00:00
  action:
  - service: hassio.addon_stdin
    data:
      addon: 7be23ff5_dropbox_sync
      input:
        command: upload
- id: '1590346226148'
  alias: Update OpenUV 5 minutes before sunrise after sunset
  description: ''
  trigger:
  - event: sunrise
    offset: -00:05:00
    platform: sun
  - event: sunset
    offset: 00:05:00
    platform: sun
  condition: []
  action:
  - data: {}
    service: openuv.update_uv_index_data
- id: carwash_notification
  alias: Carwash Notification
  description: Geef een melding wanneer de auto gewassen kan worden
  trigger:
  - entity_id: binary_sensor.car_wash
    from: 'off'
    platform: state
    to: 'on'
  condition: []
  action:
  - data:
      message: De auto kan weer worden gewassen.
    service: notify.mobile_app_pontius
  mode: single
- id: lighting_living_off_vacation
  alias: Woonkamerverlichting uitschakelen bij vakantie
  description: Schakel de verlichting uit tussen 23:00 en 23:30 als we op vakantie
    zijn
  trigger:
  - platform: time
    at: '23:00:00'
  condition:
  - condition: state
    entity_id: sensor.occupancy
    state: vacation
  action:
  - delay: '{{ "0:" ~ ((range(0,29)|random)|int) ~ ":0" }}'
  - service: light.turn_off
    entity_id: light.living
  - service: notify.admin
    data_template:
      title: Vakantie
      message: Verlichting automatisch uitgeschakeld.
- id: rdw_niro_apk_expiry
  alias: Notify APK expiry
  description: Notify 21 days before the APK date expires
  trigger:
  - platform: template
    value_template: '{{ ((as_timestamp(strptime(states(''sensor.niro_expdate''), ''%Y-%m-%d''))
      / 86400) | int) == ((as_timestamp(strptime(states(''sensor.date''), ''%Y-%m-%d''))
      / 86400) | int) + 21 }} }}'
  action:
  - service: notify.admin
    data_template:
      title: APK-keuring
      message: De APK-keuring verloopt op {{ states('sensor.niro_expdate') }}. Plan
        tijdig een APK-keuring bij de garage.
- id: signaallamp_off_sync
  alias: Signaallamp uitschakelen synchroniseren
  description: Synchroniseer scene input (en activeer daarmee de scene) als de signaallamp
    handmatig wordt uitgeschakeld.
  trigger:
  - entity_id: light.signaallamp
    platform: state
    to: 'off'
  action:
  - data:
      entity_id: input_select.signaallamp
      option: Uit
    service: input_select.select_option
- id: signaallamp_rainalarm_on
  alias: Regenalarm melden op werkdagen
  description: Trigger rain alarm when rain expected on workdays between 6 and 9 am,
    but only when someone is home
  trigger:
  - above: '0'
    entity_id: sensor.buienradar_precipitation_forecast_average
    platform: numeric_state
  condition:
  - condition: state
    entity_id: sensor.occupancy
    state: home
  - condition: state
    entity_id: group.family
    state: home
  - condition: state
    entity_id: binary_sensor.workday
    state: 'on'
  - after: 06:00:00
    before: 09:00:00
    condition: time
  action:
  - service: input_select.select_option
    data:
      entity_id: input_select.signaallamp
      option: Regenalarm
  mode: single
- id: p2000_brandweer_notification
  alias: P2000 Brandweer Melding
  description: Notificatie bij een nieuw P2000-bericht dat de brandweer dichtbij is
  trigger:
  - platform: state
    entity_id: sensor.p2000_brandweer
  condition:
  - condition: template
    value_template: '{{ states(''sensor.p2000_brandweer'') != ''unknown'' }}'
  action:
  - service_template: notify.all
    data_template:
      title: üöí P2000 Brandweer
      message: '{{ states(''sensor.p2000_brandweer'') }}'
      data:
        url: http://www.openstreetmap.org/?mlat={{ state_attr('sensor.p2000_brandweer',
          'latitude') }}&mlon={{ state_attr('sensor.p2000_brandweer', 'longitude')
          }}&zoom=16
  - service: notify.twitter
    data_template:
      message: 'üöí De #brandweer is in de buurt. #P2000

        {{ states(''sensor.p2000_brandweer'') }} https://www.openstreetmap.org/?mlat={{
        state_attr(''sensor.p2000_brandweer'', ''latitude'') }}&mlon={{ state_attr(''sensor.p2000_brandweer'',
        ''longitude'') }}&zoom=16'
  mode: single
- id: lighting_living_switch_left
  alias: Woonkamerverlichting Links
  description: Actie bij gebruik linker wandschakelaar
  trigger:
  - platform: state
    entity_id: binary_sensor.wandschakelaar_links
  condition: []
  action:
  - service: light.turn_{{ trigger.to_state.state }}
    data:
      entity_id: light.living
    entity_id: light.living
  mode: single
- id: update_notification
  alias: Versie  update melding
  trigger:
  - platform: state
    entity_id: sensor.latest_version
  condition:
  - condition: template
    value_template: '{{ states(''sensor.latest_version'') != states(''sensor.current_version'')
      }}'
  action:
  - service: notify.admin
    data:
      message: Home Assistant versie {{ states('sensor.latest_version') }} is nu beschikbaar.
      title: Update beschikbaar
  mode: single
- id: '1604731822645'
  alias: Regenalarm melden
  trigger:
  - platform: numeric_state
    entity_id: sensor.buienradar_precipitation_forecast_average
    above: '0'
  action:
  - service: notify.robert
    data:
      title: ‚òîÔ∏è Regenalarm
      message: De komende 30 minuten wordt {{ trigger.to_state.state }} {{ trigger.to_state.attributes.unit_of_measurement
        }} neerslag verwacht
  mode: single
- id: '1605447033'
  alias: Weerwaarschuwing
  description: Stuur een melding als er een nieuwe weerwaarschuwing is.
  trigger:
  - platform: state
    entity_id: binary_sensor.meteoalarm
    to: 'on'
  action:
  - service: notify.robert
    data_template:
      title: '{{state_attr(''binary_sensor.meteoalarm'', ''headline'')}}'
      message: '{{state_attr(''binary_sensor.meteoalarm'', ''description'')}} is effectief
        op {{state_attr(''binary_sensor.meteoalarm'', ''effective'')}}'
      data:
        url: https://meteoalarm.eu/ne_NL/1/0/NL009-Nederland.html
  mode: single
