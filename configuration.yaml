---
homeassistant:

  packages: !include_dir_named packages

  # Customize individual entities
  customize: !include_dir_merge_named ./includes/customizations/entities

  # Customize entities by pattern
  customize_glob: !include_dir_merge_named ./includes/customizations/globs

  allowlist_external_dirs:
    - !secret allowlist_dir_config
    - !secret allowlist_dir_ssl

  auth_providers:
    - type: homeassistant
    - type: trusted_networks
      trusted_networks:
        - 127.0.0.1
        - ::1
        - 192.168.1.0/24
        - fd00::/8

# Includes for UI items

automation: !include automations.yaml
automation split: !include_dir_list includes/automations

group: !include groups.yaml

scene: !include scenes.yaml
scene split: !include_dir_list includes/scenes

script: !include scripts.yaml
script split: !include_dir_merge_named includes/scripts

# Includes

# The themes folder is in the root of the config folder, so HACS can install
# themes there.
frontend:
  themes: !include_dir_merge_named themes

binary_sensor: !include_dir_merge_list includes/entities/binary_sensors
light: !include_dir_merge_list includes/entities/lights
notify: !include_dir_list includes/entities/notifiers
sensor: !include_dir_merge_list includes/entities/sensors

# Alphabetically listed integrations


default_config:

discovery:

# Enable the Supervisor panel in the Home Assistant frontend
hassio:

# The http component serves all files and data required for the
# Home Assistant frontend.
#
# https://www.home-assistant.io/integrations/http/
#
http:

  # Flag indicating whether additional IP filtering is enabled.
  ip_ban_enabled: true
  # Number of failed login attempt from single IP after which
  # it will be automatically banned
  login_attempts_threshold: 10

  # use_x_forwarded_for: true
  # trusted_proxies:
  #   - 172.30.33.0/24
  #   - 127.0.0.1
  #   - ::1

# Enable advanced notifications like actionable notifications and categories.
# https://companion.home-assistant.io/docs/getting_started/
#
ios:

logger:
  default: warn
  # logs:
  #   RFXtrx: debug

lovelace:
  mode: storage

# Recorder
# https://www.home-assistant.io/integrations/recorder
#
recorder:
  auto_purge: true  # default = true
  purge_keep_days: 1
  exclude:
    domains:
      - alert
      - automation
      - sun
      - script
      - weather
    entity_globs:
      - sensor.network_*
      - sensor.packets_*
    entities:
      - sensor.date
      - sensor.time
      - sensor.ha_uptime

      # large sensors
      - sensor.neerslag_buienalarm_regen_data
      - sensor.neerslag_buienradar_regen_data
      - sensor.coronadashboard_data_nederland
      - sensor.coronadashboard_data_regio
      - sensor.coronadashboard_data_gemeente

tts:
  - platform: google_translate
    service_name: say
    # cache: true
    # cache_dir: /config/tts
    time_memory: 3600
    # http protocol doesn't work, ssl required for sonos
    base_url: !secret tts_base_url
    language: 'nl'

weather:
  - platform: darksky
    api_key: !secret darksky_api_key
    units: ca
    mode: daily
