---
# Lighting package

homeassistant:
  customize:
    light.bank:
      icon: hass:floor-lamp
    light.bollamp:
      icon: hass:lamp
    light.ergens:
      icon: hass:lightbulb-group
    light.hoge_kast:
      icon: hass:lamp
    light.lab:
      icon: hass:lightbulb-group
    light.leeshoek:
      icon: hass:lightbulb-group
    light.leeslamp:
      icon: hass:track-light
    light.lichtstraat:
      icon: hass:wall-sconce-flat
    light.living:
      friendly_name: Woonkamer
      icon: hass:sofa
    light.magnarp:
      icon: hass:floor-lamp
    light.turbinelamp:
      icon: hass:lava-lamp
    light.tv_meubel:
      icon: hass:lamp
    light.willner:
      icon: hass:lamp
    light.woonkamer:
      icon: hass:lightbulb-group

######################################################################
## Light
######################################################################
light:

  - platform: group
    name: Living
    entities:
      ## clockwise from the door
      - light.hoge_kast
      - light.magnarp_1
      - light.magnarp_2
      - light.magnarp_3
      - light.leeslamp
      - light.turbinelamp
      - light.lichtstraat_1
      - light.lichtstraat_2
      - light.lichtstraat_3
      - light.lichtstraat_4
      - light.bollamp
      - light.willner

  - platform: group
    name: Lichtstraat
    entities:
      ## left to right
      - light.lichtstraat_1
      - light.lichtstraat_2
      - light.lichtstraat_3
      - light.lichtstraat_4

  - platform: group
    name: MAGNARP
    entities:
      ## top to bottom
      - light.magnarp_1
      - light.magnarp_2
      - light.magnarp_3

######################################################################
## Scene
######################################################################
scene:
  - id: '1597676235869'
    name: Woonkamerverlichting Maximaal
    entities:
      light.bank:
        min_mireds: 153
        max_mireds: 500
        effect_list:
          - colorloop
          - random
        friendly_name: Bank
        supported_features: 63
        icon: hass:floor-lamp
        state: unavailable
      light.bollamp:
        min_mireds: 153
        max_mireds: 500
        effect_list:
          - colorloop
          - random
        brightness: 255
        color_temp: 326
        effect: none
        friendly_name: Bollamp
        supported_features: 63
        icon: hass:lamp
        state: 'on'
      light.hoge_kast:
        effect_list:
          - colorloop
          - random
        brightness: 255
        hs_color:
          - 42.632
          - 14.902
        rgb_color:
          - 255
          - 244
          - 216
        xy_color:
          - 0.355
          - 0.357
        effect: none
        friendly_name: Hoge Kast
        supported_features: 61
        icon: hass:lamp
        state: 'on'
      light.leeslamp:
        min_mireds: 153
        max_mireds: 500
        brightness: 255
        color_temp: 360
        friendly_name: Leeslamp
        supported_features: 43
        icon: hass:track-light
        state: 'on'
      light.lichtstraat_1:
        brightness: 254
        friendly_name: Lichtstraat 1
        icon: hass:wall-sconce-flat
        supported_features: 33
        state: 'on'
      light.lichtstraat_2:
        brightness: 254
        friendly_name: Lichtstraat 2
        icon: hass:wall-sconce-flat
        supported_features: 33
        state: 'on'
      light.lichtstraat_3:
        brightness: 254
        friendly_name: Lichtstraat 3
        icon: hass:wall-sconce-flat
        supported_features: 33
        state: 'on'
      light.lichtstraat_4:
        brightness: 254
        friendly_name: Lichtstraat 4
        icon: hass:wall-sconce-flat
        supported_features: 33
        state: 'on'
      light.turbinelamp:
        friendly_name: Turbinelamp
        supported_features: 40
        icon: hass:lava-lamp
        state: 'on'
      light.willner:
        min_mireds: 153
        max_mireds: 500
        brightness: 255
        color_temp: 360
        friendly_name: Willner
        supported_features: 43
        icon: hass:lamp
        state: 'on'
      light.magnarp_1:
        min_mireds: 250
        max_mireds: 454
        brightness: 254
        color_temp: 345
        friendly_name: MAGNARP 1
        supported_features: 35
        state: 'on'
      light.magnarp_2:
        min_mireds: 250
        max_mireds: 454
        brightness: 254
        color_temp: 351
        friendly_name: MAGNARP 2
        supported_features: 35
        state: 'on'
      light.magnarp_3:
        min_mireds: 250
        max_mireds: 454
        brightness: 254
        color_temp: 353
        friendly_name: MAGNARP 3
        supported_features: 35
        state: 'on'
    icon: hass:brightness-7
  - id: '1601486865465'
    name: Schemerverlichting
    entities:
      light.hoge_kast:
        effect_list:
          - colorloop
          - random
        brightness: 179
        hs_color:
          - 30
          - 57.255
        rgb_color:
          - 255
          - 181
          - 108
        xy_color:
          - 0.493
          - 0.389
        effect: none
        friendly_name: Hoge Kast
        supported_features: 61
        icon: hass:lamp
        state: 'on'
      light.leeslamp:
        min_mireds: 153
        max_mireds: 500
        brightness: 140
        color_temp: 440
        friendly_name: Leeslamp
        supported_features: 43
        icon: hass:track-light
        state: 'on'
      light.turbinelamp:
        friendly_name: Turbinelamp
        supported_features: 40
        icon: hass:lava-lamp
        state: 'on'
      light.willner:
        min_mireds: 153
        max_mireds: 500
        brightness: 175
        color_temp: 435
        friendly_name: Willner
        supported_features: 43
        icon: hass:lamp
        state: 'on'
      light.lichtstraat_1:
        brightness: 65
        friendly_name: Lichtstraat 1
        icon: hass:wall-sconce-flat
        supported_features: 33
        state: 'on'
      light.lichtstraat_2:
        brightness: 65
        friendly_name: Lichtstraat 2
        icon: hass:wall-sconce-flat
        supported_features: 33
        state: 'on'
      light.lichtstraat_3:
        brightness: 65
        friendly_name: Lichtstraat 3
        icon: hass:wall-sconce-flat
        supported_features: 33
        state: 'on'
      light.lichtstraat_4:
        brightness: 65
        friendly_name: Lichtstraat 4
        icon: hass:wall-sconce-flat
        supported_features: 33
        state: 'on'
      light.magnarp_1:
        min_mireds: 250
        max_mireds: 454
        brightness: 85
        color_temp: 400
        friendly_name: MAGNARP 1
        supported_features: 35
        state: 'on'
      light.magnarp_2:
        min_mireds: 250
        max_mireds: 454
        brightness: 85
        color_temp: 400
        friendly_name: MAGNARP 2
        supported_features: 35
        state: 'on'
      light.magnarp_3:
        min_mireds: 250
        max_mireds: 454
        brightness: 85
        color_temp: 400
        friendly_name: MAGNARP 3
        supported_features: 35
        state: 'on'
      light.bollamp:
        min_mireds: 153
        max_mireds: 500
        effect_list:
          - colorloop
          - random
        brightness: 141
        color_temp: 434
        effect: none
        friendly_name: Bollamp
        supported_features: 63
        icon: hass:lamp
        state: 'on'
    icon: hass:weather-sunset

######################################################################
## Automation
######################################################################
automation:

  - alias: Turn On Living Lights at Dusk
    description: Inschakelen schemerverlichting woonkamer voor zonsondergang
    id: 79b3abe8-e220-4563-a55b-74bd3b850a3b
    mode: single
    trigger:
      - event: sunset
        offset: -00:30:00
        platform: sun
    action:
      - scene: scene.schemerverlichting
      - service: notify.twitter
        data:
          message: >
            {{ [
            "Vlak voor zonsondergang doe ik altijd de binnenverlichting aan.",
            "Ik doe de lampen aan, omdat het straks binnen donker gaat worden.",
            "Steeds zodra de zon verdwijnt,
              doe ik de @TweetHue verlichting aan.",
            "De hoogste tijd om de @IKEA @Tradfri verlichting in te schakelen."
            ]
            | random + "  #HomeAssistant
            " + [ "#Beveiliging", "#Zonsondergang", "#Verlichting",
            "#PhilipsHue", "Hue", "#IkeaTradfri", "#Tradfri", "#SmartLighting",
            "#SmartHome", "#HomeAutomation"
            ] | random }}
          data:
            media: >-
              {% set pictures = [
                "/config/www/img/sunset1.jpg",
                "/config/www/img/sunset2.jpg",
                "/config/www/img/sunset3.jpg",
                "/config/www/img/sunset4.jpg",
                "/config/www/img/sunset5.jpg",
              ] %}
              {{ pictures|random }}

  - id: b17bc209-ef49-4199-bb5c-fae6c3f428a4
    alias: Woonkamerverlichting uitschakelen bij vakantie
    description: Schakel de verlichting uit tussen 23:00 en 23:30
      als we op vakantie zijn
    trigger:
      - platform: time
        at: '23:00:00'
    condition:
      - condition: state
        entity_id: sensor.occupancy
        state: vacation
    action:
      - delay: '{{ "0:" ~ ((range(0,29)|random)|int) ~ ":0" }}'
      - service: light.turn_off
        entity_id: light.living
      - service: notify.admin
        data:
          title: Vakantie
          message: Verlichting automatisch uitgeschakeld.

  - id: b24e7ee3-fbd7-4e91-9116-095d7b24c843
    alias: Woonkamerverlichting Links
    description: Actie bij gebruik linker wandschakelaar
    trigger:
      - platform: state
        entity_id: binary_sensor.wandschakelaar_links
    condition: []
    action:
      - service: light.turn_{{ trigger.to_state.state }}
        data:
          entity_id: light.living
        entity_id: light.living
    mode: single
