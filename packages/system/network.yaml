---
# Package: Network
#
# Related UI integrations:
# - Speedtest
# - Netgear

# Sensors
#
sensor:

  # DNS IP
  # https://www.home-assistant.io/integrations/dnsip
  #
  - platform: dnsip

# Binary sensors
#
binary_sensor:

  - platform: ping
    host: 8.8.8.8
    name: "Google DNS Ping"
    count: 5
    scan_interval: 60

  - platform: ping
    host: !secret netgear_host
    name: "Router Ping"
    count: 5
    scan_interval: 60

# Templates
# https://www.home-assistant.io/integrations/template/
#
template:
  - sensor:
    - name: "WAN Ping"
      unique_id: 13e431ac-2bb2-42f2-aa79-1d56a414134a
      icon: "mdi:speedometer"
      unit_of_measurement: "ms"
      state: "{{ state_attr('binary_sensor.google_dns_ping',
        'round_trip_time_avg')|round(2) }}"

    - name: "LAN Ping"
      unique_id: 10a2e49e-b54e-491a-9c9f-05bba86e30f5
      icon: "mdi:speedometer"
      unit_of_measurement: "ms"
      state: "{{ state_attr('binary_sensor.router_ping',
        'round_trip_time_avg')|round(2) }}"
