---
# Inspired by @basnijholt
# https://github.com/basnijholt/home-assistant-config/blob/ae69265f1b9bb904e884e985b99d5d2cbaa77f82/includes/sensors.yaml#L227
#
# yamllint disable rule:line-length
# {% set parents = state_attr("proximity.home", "nearest").split(", ") | reject("eq", "BjÃ¶rn") | list %}
#

template:
  - sensor:
      - name: Nearest Parent Notify
        availability: >-
          {{ state_attr('proximity.parents_from_home', 'nearest') not in 
            ['unavailable','unknown','none'] }}
        state: >-
          {% if is_state('person.robert', 'home') and 
            is_state('person.monique', 'home') %}
            notify.parents
          {% elif is_state_attr('proximity.parents_from_home',
            'nearest', 'Robert') %}
            notify.robert
          {% else %}
            notify.monique
          {% endif %}
