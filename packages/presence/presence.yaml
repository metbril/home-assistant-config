################################################
## Packages / Presence / Presence
################################################

homeassistant:
  customize:

    ################################################
    ## Node Anchors
    ################################################

    package.node_anchors:
      customize: &customize
        package: 'presence'

################################################
## ASUSWRT
################################################

asuswrt:
  host: !secret asuswrt_host
  username: !secret asuswrt_username
  ssh_key: !secret asuswrt_ssh_key
  protocol: ssh
  port: 22
  mode: router
  sensors:
      - upload
      - download
      - upload_speed
      - download_speed

################################################
## MQTT
################################################

mqtt:
  # broker: core-mosquitto
  broker: !secret mqtt_cloudmqtt_broker
  port: !secret mqtt_cloudmqtt_port
  username: !secret mqtt_cloudmqtt_username
  password: !secret mqtt_cloudmqtt_password
  certificate: auto

################################################
## OwnTracks
################################################

owntracks:

################################################
## Device Tracker
################################################

# https://home-assistant.io/components/device_tracker/

device_tracker:
  - platform: asuswrt
    consider_home: 180
    interval_seconds: 60 # Seconds between each scan for new devices
    new_device_defaults:
      track_new_devices: false
      hide_if_away: false

################################################
## Group
################################################

group:

  presence_view:
    name: Presence
    view: yes
    entities:
      ## badges
      - alarm_control_panel.home
      - binary_sensor.ha_mode
      - sensor.ha_mode
      
      ## cards
      - group.ha_mode
      - group.family 
      - group.vacation

  family:
    control: hidden
    entities:
      - person.robert
      - person.monique
      - person.bjorn

################################################
## Script
## https://www.home-assistant.io/components/script
################################################

# script:
#   goodnight:
    # turn of the lights, turn off media
    # sequence:
    #   - alias: Turn Off Living Lights
        


################################################
## Scene
## https://www.home-assistant.io/components/scene
################################################

scene:
  - name: Goodnight
    entities:
      light.living_lights: off
      media_player.woonkamer: paused
      media_player.living_tv: off

