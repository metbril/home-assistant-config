#########################################################################
## @package     : signals
## @description : Signal Lamp Management
## @author      : Robert van Bregt
#########################################################################

input_boolean:
  signaallamp:
    initial: True
    name: Signaallamp
    icon: mdi:alarm-light

automation:

  - alias: Bijwerken signaallamp via scene
    description: Update Signaallamp light using selected scene
    trigger:
    - entity_id: input_select.signaallamp
      platform: state
    condition:
    - condition: state
      entity_id: input_boolean.signaallamp
      state: 'on'
    action:
    - data_template:
        entity_id: '{{ (''scene.signaal_'' ~ trigger.to_state.state) | lower | replace(''
          '', ''_'' ) }}'
      service: scene.turn_on


  - alias: Cancel Rain Alarm Signal
    description: Remove rain alarm at 9 or when no rain expected
    trigger:
      - platform: template
        value_template: '{{ states(''sensor.buienradar_precipitation_forecast_average'')
          | float == 0 }}'
      - at: 09:00:00
        platform: time
    condition:
      - condition: state
        entity_id: input_select.signaallamp
        state: Regenalarm
    action:
      - service: input_select.select_option
        data:
          entity_id: input_select.signaallamp
          option: Uit
