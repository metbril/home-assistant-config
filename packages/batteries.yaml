################################################
## Packages / Batteries
##
## Batteries
##
################################################

homeassistant:

  customize:

    ################################################
    ## Node Anchors
    ################################################

    package.node_anchors:
      customize: &customize
        package: 'batteries'

    ################################################
    ## Group
    ################################################

    group.batteries:
      friendly_name: Batterijen

    ################################################
    ## Sensor
    ################################################

    sensor.living_siren_alarm_battery_level:
      friendly_name: Batterij sirene woonkamer
      device_class: battery
      unit_of_measurement: '%'

    sensor.pws_th_battery_level:
      friendly_name: Batterij temperatuur PWS
      device_class: battery
      unit_of_measurement: '%'

################################################
## Sensor
################################################

sensor:
  - platform: template
    sensors:

      living_siren_alarm_battery_level:
        entity_id: zwave.living_siren_alarm
        value_template: >-
          {{ states.zwave.living_siren_alarm.attributes.battery_level }}

      pws_th_battery_level:
        entity_id: sensor.pws_th_temperature
        value_template: >-
          {% set battery_numeric = states.sensor.pws_th_temperature.attributes['Battery numeric'] | int('unknown') %}
          {% set battery_level = battery_numeric * 10 | int('unknown') %}
          {% if (battery_level == 90) %}
            100
          {% else %}
            {{battery_level}}
          {% endif %}
