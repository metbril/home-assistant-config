################################################
## Packages / Batteries
##
## Batteries
##
################################################

homeassistant:

  customize:

    ################################################
    ## Node Anchors
    ################################################

    package.node_anchors:
      customize: &customize
        package: 'batteries'

    ################################################
    ## Group
    ################################################

    group.batteries:
      friendly_name: Batterijen

    ################################################
    ## Sensor
    ################################################

    sensor.living_multi_sensor_battery_level:
      friendly_name: Batterij beweging woonkamer
      device_class: battery
      unit_of_measurement: '%'

    sensor.frontdoor_contact_battery_level:
      friendly_name: Batterij contact voordeur
      device_class: battery
      unit_of_measurement: '%'

    sensor.living_siren_alarm_battery_level:
      friendly_name: Batterij sirene woonkamer
      device_class: battery
      unit_of_measurement: '%'

    sensor.master_bedroom_outside_door_battery_level:
      friendly_name: Batterij contact hoofdslaapkamer
      device_class: battery
      unit_of_measurement: '%'

    sensor.pws_th_battery_level:
      friendly_name: Batterij temperatuur PWS
      device_class: battery
      unit_of_measurement: '%'

    sensor.robert_owntracks_battery_level:
      friendly_name: Robert Owntracks
      device_class: battery
      unit_of_measurement: '%'

################################################
## Sensor
################################################

sensor:
  - platform: template
    sensors:

      living_multi_sensor_battery_level:
        entity_id: zwave.living_multi_sensor
        value_template: >-
          {{ states.zwave.living_multi_sensor.attributes.battery_level }}

      frontdoor_contact_battery_level:
        entity_id: zwave.frontdoor_contact
        value_template: >-
          {{ states.zwave.frontdoor_contact.attributes.battery_level }}

      living_siren_alarm_battery_level:
        entity_id: zwave.living_siren_alarm
        value_template: >-
          {{ states.zwave.living_siren_alarm.attributes.battery_level }}

      master_bedroom_outside_door_battery_level:
        entity_id: zwave.master_bedroom_outside_door
        value_template: >-
          {{ states.zwave.master_bedroom_outside_door.attributes.battery_level }}

      pws_th_battery_level:
        entity_id: sensor.pws_th_temperature
        value_template: >-
          {% set battery_numeric = states.sensor.pws_th_temperature.attributes['Battery numeric'] | int('unknown') %}
          {% set battery_level = battery_numeric * 10 | int('unknown') %}
          {% if (battery_level == 90) %}
            100
          {% else %}
            {{battery_level}}
          {% endif %}

      robert_owntracks_battery_level:
        entity_id: device_tracker.robert_owntracks
        value_template: >-
          {{ state_attr('device_tracker.robert_owntracks', 'battery') | int('unknown') }}
