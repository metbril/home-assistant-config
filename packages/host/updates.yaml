############################################################################
## Packages / Host / Updates
############################################################################

homeassistant:
  customize:
    ########################################################################
    ## Node Anchors
    ########################################################################

    package.node_anchors:
      customize: &customize
        package: 'updates'

############################################################################
## Updater
## https://www.home-assistant.io/components/updater/
## https://www.home-assistant.io/docs/backend/updater/
############################################################################

updater:
  reporting: true # collect basic information about this instance and its environment
  include_used_components: true # report components to developers

############################################################################
## Binary Sensor
############################################################################

binary_sensor:
  - platform: template
    sensors:
      ha_update_available:
        value_template: >-
          {{ states.sensor.ha_current_stable_version.state != states.sensor.ha_installed_version.state and
             states.sensor.ha_current_stable_version.state != 'unavailable' }}

############################################################################
## Sensor
############################################################################

sensor:
  - platform: version
    name: HA Installed Version

  - platform: rest
    resource: https://s3.amazonaws.com/hassio-version/stable.json
    name: HA Current Stable Version
    value_template: '{{ value_json.homeassistant.raspberrypi3 }}'
    scan_interval: 3600

  - platform: rest
    resource: https://s3.amazonaws.com/hassio-version/beta.json
    name: HA Current Beta Version
    value_template: '{{ value_json.homeassistant.raspberrypi3 }}'
    scan_interval: 3600

  - platform: rest
    resource: https://s3.amazonaws.com/hassio-version/dev.json
    name: HA Current Development Version
    value_template: '{{ value_json.homeassistant.raspberrypi3 }}'
    scan_interval: 3600
