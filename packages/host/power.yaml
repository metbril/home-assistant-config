## Raspberry Pi Charger Sensor
## https://community.home-assistant.io/t/raspberry-pi-charger-sensor/58155

sensor:
  - platform: command_line
    name: 'System: number of undervoltage messages'
    command: "dmesg | grep Under-voltage | wc -l"
    unit_of_measurement: 'times'
    scan_interval: 120

#  - platform: template
#    sensors:
#       check_charger:
#         friendly_name: "System: Charger"
#         value_template: >
#           {% if is_state("sensor.system_undervoltage_status", "throttled=0x0") -%}
#              No throttling detected
#           {% elif is_state("sensor.system_undervoltage_status", "throttled=0x4") -%}
#              Throtteling detected {{ states("sensor.system_number_of_undervoltage_messages") }} times 
#           {% elif is_state("sensor.system_undervoltage_status", "throttled=0x5") -%}
#              Throtteling detected {{ states("sensor.system_number_of_undervoltage_messages") }} times 
#           {%- endif %}
