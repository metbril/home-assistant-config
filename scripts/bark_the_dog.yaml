---
bark_the_dog:
  alias: Laat de hond blaffen
  description: >
    Loudly play the sound of a barking dog. Delay for the duration of the clip
    afterwards. Lower the volume just in case. Limited to Sonos players.
  icon: mdi:dog-side
  mode: single

  fields:
    entity_id:
      name: Media Player
      description: The media player that plays the sound
      example: "media_player.living_speaker"
      required: true
      selector:
        entity:
          domain: media_player
          integration: sonos

  variables:
    host: !secret tts_base_url

  sequence:
    - service: sonos.snapshot
      data:
        entity_id: "{{ entity_id }}"

    - service: media_player.unjoin
      data:
        entity_id: "{{ entity_id }}"

    - service: media_player.volume_set
      data:
        volume_level: 1
        entity_id: "{{ entity_id }}"

    - service: media_player.play_media
      data:
        media_content_type: music
        media_content_id: "/local/sounds/dog-barking-noise.mp3"
        entity_id: "{{ entity_id }}"

    - delay:
        hours: 0
        minutes: 0
        seconds: 13
        milliseconds: 0

    - service: media_player.volume_set
      data:
        volume_level: 0.1
        entity_id: "{{ entity_id }}"

    - service: sonos.restore
      data:
        entity_id: "{{ entity_id }}"
